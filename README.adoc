= âš¡ Henne CLI â€” Benutzer-Dokumentation
:toc:
:icons: font
:sectnums:

Henne ist ein interaktives Kommandozeilenprogramm in Python, das dem Benutzer vordefinierte Fragen stellt, die aus einer YAML-Datei geladen werden. Es unterstÃ¼tzt die Fragetypen `select` (Auswahlliste) und `text` (Texteingabe mit optionaler Validierung).

== ğŸ“¦ Voraussetzungen

Stellen Sie sicher, dass Python installiert ist und installieren Sie die benÃ¶tigten Pakete:

[source,bash]
----
pip install questionary pyyaml
----

== ğŸš€ Anwendung starten

FÃ¼hren Sie das Programm mit folgendem Befehl im Terminal aus:

[source,bash]
----
python main.py
----

[TIP]
Falls Ihre Datei anders heiÃŸt, passen Sie den Dateinamen entsprechend an.

== âš™ï¸ Konfigurationsdatei (`config.yaml`)

Die Fragen werden aus einer YAML-Datei geladen. Diese Datei muss ein oberstes Feld `questions:` enthalten, welches eine Liste von Fragedefinitionen ist.

=== âœ… UnterstÃ¼tzte Fragetypen

[cols="1,2,3", options="header"]
|===
| Typ   | Beschreibung                    | Erforderliche Felder
| select | Auswahl aus einer Liste         | `type`, `name`, `message`, `choices`
| text   | Texteingabe mit optionaler Regex | `type`, `name`, `message` [+ `validate` optional]
|===

=== ğŸ“„ Beispiel: `config.yaml`

[source,yaml]
----
questions:
  - type: select
    name: einspeisung
    message: "Wie erfolgt die Einspeisung?"
    choices:
      - einseitig
      - beidseitig

  - type: text
    name: UWLastPaare
    message: "Versorgte UWs mit Last? (z.â€¯B. SE=15MW,N=20MW)"
    validate: '^(SE|EE|N)=\d+(\.\d+)?MW(,(SE|EE|N)=\d+(\.\d+)?MW)*$'
----

[TIP]
`validate` nutzt einen regulÃ¤ren Ausdruck, um Eingaben wie `SE=15MW,N=20MW` zu erzwingen.

== ğŸ§ª Beispielhafte Benutzereingabe

Beim Start des Programms sieht eine typische Interaktion so aus:

[source,bash]
----
? Wie erfolgt die Einspeisung?  (Pfeiltasten benutzen)
â¯ einseitig
  beidseitig

? Versorgte UWs mit Last? (z.â€¯B. SE=15MW,N=20MW)
> SE=15MW,N=20MW
----

== ğŸ“¥ Ausgabeformat

Die Benutzerantworten werden als WÃ¶rterbuch (`dict`) zurÃ¼ckgegeben, wobei jeder SchlÃ¼ssel dem Namen der Frage (`name`) entspricht:

[source,python]
----
{
  "einspeisung": "einseitig",
  "UWLastPaare": "SE=15MW,N=20MW",
  "UWs": [
    {"type": "SE", "last": "15MW"},
    {"type": "N", "last": "20MW"}
  ]
}
----

[TIP]
Die strukturierte Liste unter `UWs` wird automatisch aus dem Textfeld `UWLastPaare` extrahiert.

== â— Fehlerbehandlung & Validierung

Das Programm validiert die YAML-Datei und bricht mit einer Fehlermeldung ab, wenn:

* Die Datei fehlt oder fehlerhaft ist
* Eine Frage unvollstÃ¤ndig ist (fehlende `type`, `name`, `message`)
* Ein nicht unterstÃ¼tzter Fragetyp verwendet wird (`confirm` wird nicht mehr unterstÃ¼tzt)
* Eine `select`-Frage keine gÃ¼ltige `choices`-Liste enthÃ¤lt
* Ein ungÃ¼ltiger Regex fÃ¼r `text`-Fragen angegeben wird

== ğŸ“š Integration in eigene Anwendungen

Um die CLI-Logik in dein eigenes Python-Programm zu integrieren, importiere oder kopiere folgende Funktionen:

* `read_config`
* `validate_config`
* `create_questions`
* `ask_questions`
* `get_user_settings`
* `parse_uw_last_pairs` (nur falls verwendet)

=== ğŸ” Beispielnutzung

[source,python]
----
answers = get_user_settings("pfad/zur/config.yaml")
answers["UWs"] = parse_uw_last_pairs(answers)

print("Antworten des Benutzers:", answers)
----

== ğŸ§© Hinweise zur Anpassung

* Eigene Validatoren lassen sich einfach definieren (z.â€¯B. fÃ¼r abhÃ¤ngige Eingaben)
* `parse_uw_last_pairs()` erlaubt das strukturierte Parsen von Antworten wie `SE=15MW,N=20MW`
